<input
	type="checkbox"
	id="my_modal_6"
	[checked]="this.authDialogService.isOpen$ | async"
	class="modal-toggle"
/>
<div class="modal" role="dialog">
	<div class="modal-box max-w-sm">
		<div class="flex items-start">
			<header class="flex-1 mb-4">
				<h1 class="text-3xl mb-1 font-medium">{{ isCreateMode ? 'Create Account' : 'Login' }}</h1>
				<h2 class="text-sm opacity-60">
					@if (isCreateMode) {
						<p>Please sign up to book appointments</p>
					} @else {
						<p>Please login to book appointments</p>
					}
				</h2>
			</header>
			<button type="button" class="btn btn-circle btn-ghost" (click)="onClose()">
				<svg
					width="1rem"
					height="1rem"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					xmlns="http://www.w3.org/2000/svg"
				>
					<line x1="18" y1="6" x2="6" y2="18" />
					<line x1="6" y1="6" x2="18" y2="18" />
				</svg>
			</button>
		</div>

		<form (submit)="onSubmit()" [formGroup]="form">
			@if (isCreateMode) {
				<fieldset class="fieldset">
					<legend class="fieldset-legend font-normal text-md py-1">Full Name</legend>
					<input
						type="text"
						class="input input-field w-full"
						placeholder="Enter full name ..."
						formControlName="name"
					/>
					<p
						class="validator-hint mt-0 mb-1"
						[class.invalid]="nameField?.touched && nameField?.invalid"
					>
						Full Name is required.
					</p>
					<p class="label hidden">Optional</p>
				</fieldset>
			}
			<fieldset class="fieldset">
				<legend class="fieldset-legend font-normal text-md py-1">Email</legend>
				<input
					type="email"
					class="input input-field w-full"
					placeholder="Enter email ..."
					formControlName="email"
				/>
				<p
					class="validator-hint mt-0 mb-1"
					[class.invalid]="emailField?.touched && emailField?.invalid"
				>
					Email is required.
				</p>
				<p class="label hidden">Optional</p>
			</fieldset>
			<fieldset class="fieldset">
				<legend class="fieldset-legend font-normal text-md py-1">Password</legend>
				<input
					type="password"
					class="input input-field w-full"
					placeholder="Enter password ..."
					formControlName="password"
				/>
				<p
					class="validator-hint mt-0 mb-1"
					[class.invalid]="passwordField?.touched && passwordField?.invalid"
				>
					Password is required.
				</p>
				<p class="label hidden">Optional</p>
			</fieldset>
			<div class="mb-2 mt-4">
				<button type="submit" class="btn btn-primary w-full text-base" [disabled]="form.invalid">
					<span>{{ isCreateMode ? 'Create account' : 'Login' }}</span>
					@if (loadingUser$ | async) {
						<span class="loading loading-dots loading-sm"></span>
					}
				</button>
			</div>
		</form>
		@if (isCreateMode) {
			<p class="text-sm text-center">
				Already have an account?
				<a class="text-primary cursor-pointer underline" (click)="toggleMode()">Login now</a>
			</p>
		} @else {
			<p class="text-sm text-center">
				Not have an account yet?
				<a class="text-primary cursor-pointer underline" (click)="toggleMode()">Create now</a>
			</p>
		}
	</div>
</div>
